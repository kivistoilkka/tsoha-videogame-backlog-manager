{% extends "layout.html" %}
{% block title %}Register{% endblock %}
{% block content %}
<h2>Register new user</h2>
<form action="/register" method="POST" onsubmit="return check(this)">
<div class="form-group col-6">
<label for="inputUsername">Username</label>
<input type="text" class="form-control" id="inputUsername" name="username" aria-describedby="usernameHelp">
<small id="usernameHelp" class="form-text text-muted">Use 5-31 characters with no whitespaces.</small>
</div>
<div class="form-group col-6">
<label for="inputPassword1">Password</label>
<input type="password" class="form-control" id="inputPassword1" name="password1" aria-describedby="passwordHelp">
<small id="passwordHelp" class="form-text text-muted">Use 5-63 characters.</small>
</div>
<div class="form-group col-6">
<label for="inputPassword2">Re-enter password</label>
<input type="password" class="form-control" id="inputPassword2" name="password2">
</div>
<div class="form-group col-6">
<button type="submit" class="btn btn-primary">Register</button>
</div>
</form>

<script>
check = (form) => {
    if (form.username.value == "" || form.password1.value == "" || form.password2.value == "") {
        alert("Some of the fields are empty")
        return false
    }
    if (form.username.value.includes(" ")) {
        alert("Username cannot contain whitespaces")
        return false
    }
    if (form.username.value.length > 31) {
        alert("Too long username, use less than 32 characters")
        return false
    }
    if (form.username.value.length < 5) {
        alert("Too short username, use at least 5 characters")
        return false
    }
    if (form.password1.value.length > 63 || form.password2.value.length > 63) {
        alert("Too long password, use less than 64 characters")
        return false
    }
    if (form.password1.value.length < 5 || form.password2.value.length < 5) {
        alert("Too short password, use at least 5 characters")
        return false
    }
    if (!(form.password1.value == form.password2.value)) {
        alert("Passwords do not match")
        return false
    }
    if (form.password1.value.includes(" ")) {
        alert("Password cannot contain whitespaces")
        return false
    }
    return true
}
</script>

{% endblock %}
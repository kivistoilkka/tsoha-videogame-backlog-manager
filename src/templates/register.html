{% extends "layout.html" %}
{% block title %}Register{% endblock %}
{% block content %}
<h2>Register new user</h2>
<form action="/register" method="POST" onsubmit="return check(this)">
Username: <input type="text" name="username"> <br>
Password: <input type="password" name="password1"> <br>
Re-enter password:  <input type="password" name="password2"> <br>
<input type="submit" value="Register">
</form>

<script>
check = (form) => {
    if (form.username.value == "" || form.password1.value == "" || form.password2.value == "") {
        alert("Some of the fields are empty")
        return false
    }
    if (form.username.value.includes(" ")) {
        alert("Username cannot contain whitespaces")
        return false
    }
    if (form.username.value.length > 31) {
        alert("Too long username, use less than 32 characters")
        return false
    }
    if (form.username.value.length < 5) {
        alert("Too short username, use at least 5 characters")
        return false
    }
    if (form.password1.value.length > 63 || form.password2.value.length > 63) {
        alert("Too long password, use less than 64 characters")
        return false
    }
    if (form.password1.value.length < 5 || form.password2.value.length < 5) {
        alert("Too short password, use at least 5 characters")
        return false
    }
    if (!(form.password1.value == form.password2.value)) {
        alert("Passwords do not match")
        return false
    }
    return true
}
</script>

{% endblock %}